---
description: 重置TDD工作流状态
allowed-tools: Bash, Read, Write
---

## 🔄 重置TDD工作流状态

重置 TDD 工作流到初始状态，清除当前阶段状态和历史记录，为新的 TDD 循环做准备。

> **注意**：这个命令只重置状态，不会重新初始化环境。如果需要重新初始化整个 TDD 环境，请使用 `claude-tdd init --force` 命令。

### 执行命令

运行TDD重置脚本：

```bash
bash $CLAUDE_PROJECT_DIR/.claude/scripts/tdd/reset.sh
```

### 重置内容

1. **TDD状态重置**: 清除 tdd-state.json 中的当前阶段
2. **历史记录清理**: 清空 TDD 循环历史
3. **测试缓存清理**: 删除临时测试文件和缓存
4. **计数器重置**: 重置循环计数和统计信息
5. **工作区清理**: 清理临时工作文件

### 何时使用

- 完成一个功能的 TDD 开发，准备开始新功能
- TDD 状态出现问题，需要清理重置
- 想要从干净的状态开始新的 TDD 循环
- 切换到不同的开发任务

### 强制重置

如果需要强制重置（忽略未完成的阶段警告）：

```bash
bash $CLAUDE_PROJECT_DIR/.claude/scripts/tdd/reset.sh --force
```

### 重置后的状态

重置完成后：
- TDD 阶段：回到初始状态
- 历史记录：清空
- 统计信息：重置为 0
- 工作文件：清理干净

### 重置后的下一步

- 使用 `/tdd:status` 确认状态已重置
- 使用 `/tdd:red` 开始新的 TDD 循环
- 或者使用其他 TDD 阶段命令

### 与初始化的区别

| 操作 | `/tdd:reset` | `claude-tdd init` |
|------|-------------|------------------|
| 目的 | 重置状态 | 初始化环境 |
| 范围 | 状态文件 | 完整的 .claude 目录 |
| 使用场景 | 开发过程中 | 项目开始时 |
| 配置文件 | 保留 | 重新创建 |
| 模板文件 | 保留 | 重新复制 |

### 安全提示

- 重置会清除所有TDD历史记录
- 进行中的TDD阶段状态将丢失
- 建议在完成当前循环后再重置

---
**下一步**: 使用 `/tdd:status` 确认重置成功，然后用 `/tdd:red` 开始新的TDD循环